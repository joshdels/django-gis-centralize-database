<div class="sticky top-0 h-screen py-5 px-1 sm:px-5 flex flex-col">
    <div class="flex flex-col text-white mb-10">
        <h1 class="font-black tracking-widest leading-none mb-3">
            <a href="{% url 'gis_database:dashboard' %}"
               class="hover:opacity-80 transition-opacity">
                <span class="block sm:hidden text-4xl text-center">T</span>
                <span class="hidden sm:block sm:text-xl lg:text-4xl tracking-widest">TopMap</span>
            </a>
        </h1>
        <p class="hidden sm:block text-xs sm:text-sm tracking-widest">Making GIS Projects and Teams Easy to Organize</p>
    </div>
    <nav class="flex-1 flex flex-col gap-3">
        {% for item in sidebar_menu %}
            <a href="{{ item.url }}"
               class="group flex items-center justify-center xl:justify-start gap-3 p-2 bg-white/10 hover:bg-white text-white hover:text-primary transition-all font-black uppercase text-xs lg:text-sm tracking-widest rounded-lg">
                <i data-lucide="{{ item.icon }}" class="w-6 h-6 lg:w-8 lg:h-8"></i>
                <span class="hidden lg:block">{{ item.label }}</span>
            </a>
        {% endfor %}
    </nav>
    <div class="p-2 border border-secondary bg-secondary/20 shadow-sm rounded-xl flex items-center justify-between mt-5">
        <div class="hidden sm:flex items-center gap-4">
            <div class="h-10 w-10 bg-white flex items-center justify-center border-2 border-black rounded-full shrink-0">
                <span class="font-black text-neutral text-lg">{{ user.username|first|upper }}</span>
            </div>
            <div class="flex flex-col hidden md:flex">
                <span class="text-sm font-black text-white truncate mb-1 tracking-widest">{{ user.username }}</span>
                <span class="text-[10px] font-black uppercase text-white/80">Project Manager</span>
            </div>
        </div>
        <div class="relative">
            <button id="settingsBtn"
                    class="p-2 text-white/50 hover:text-white hover:rotate-90 transition">
                <i data-lucide="settings"
                   class="w-6 h-6 sm:w-7 md:w-8 sm:h-7 md:h-8 text-white"></i>
            </button>
        </div>
    </div>
    <div id="userpanel" class="hidden ">{% include "components/user/setting.html" %}</div>
</div>
<script>
    const settingsBtn = document.getElementById('settingsBtn');
    const userPanel = document.getElementById('userpanel');

    settingsBtn.addEventListener('click', () => {
        userPanel.classList.toggle('hidden');
        userPanel.classList.toggle('block');
    });

    document.addEventListener('click', (e) => {
        if (!userPanel.contains(e.target) && !settingsBtn.contains(e.target)) {
            userPanel.classList.add('hidden');
            userPanel.classList.remove('block');
        }
    });
</script>
